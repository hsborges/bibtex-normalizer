"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{6625:function(e,n,r){var t=r(6744);n.Z=(0,t.zo)("button",{display:"flex",justifyContent:"center",alignItems:"center",columnGap:5,padding:"0.5em 1em",border:"1px solid",borderRadius:"8px",fontWeight:"bolder",cursor:"pointer",outline:"none",variants:{rounded:{true:{padding:"0.5em",borderRadius:"100%"}},bordered:{true:{backgroundColor:"transparent !important"}},disabled:{true:{opacity:.5,cursor:"not-allowed"}},color:{transparent:{backgroundColor:"transparent",borderColor:"transparent"},normal:{backgroundColor:"$gray11",borderColor:"$gray11",color:"White"},primary:{backgroundColor:"$teal9",borderColor:"$teal10",color:"White"},warning:{color:"White",border:"1px solid $tomato10",backgroundColor:"$tomato10",fontWeight:"bolder"}},size:{small:{fontSize:"0.8em"},normal:{fontSize:"1em"},large:{fontSize:"1.2em"}}},compoundVariants:[{color:"normal",bordered:!0,css:{color:"$gray11",borderColor:"$gray11"}},{color:"primary",bordered:!0,css:{color:"$teal9",borderColor:"$teal9"}},{color:"warning",bordered:!0,css:{color:"$tomato10",borderColor:"$tomato10"}}],defaultVariants:{color:"primary",size:"normal",rounded:!1,bordered:!1}})},8621:function(e,n,r){r.r(n),r.d(n,{__N_SSG:function(){return V},default:function(){return Z}});var t=r(5893),o=r(6486),i=r(7294),a=r(2370),l=r(6625),d=r(3499),c=r(6744);function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=(0,c.zo)(d.fC,{all:"unset",color:"$teal9",backgroundColor:"white",width:16,height:16,border:"1px solid $teal9",marginRight:5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 10px $teal9","&:hover":{backgroundColor:"$teal2"},"&[disabled]":{backgroundColor:"$teal3",color:"$teal8",borderColor:"$teal8"}}),h=(0,c.zo)(d.z$,{display:"flex",alignItems:"center"}),p=(0,c.zo)("label",{lineHeight:1.25}),g=(0,c.zo)("div",{display:"flex",alignContent:"center"}),m=(0,c.zo)((function(e){var n=e.checked,r=e.defaultChecked,o=e.disabled,i=e.onCheckedChange,l=e.defaultLabel,d=u(e,["checked","defaultChecked","disabled","onCheckedChange","defaultLabel"]);return(0,t.jsxs)(g,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){s(e,n,r[n])}))}return e}({},d,{children:[(0,t.jsx)(f,{id:l,checked:n,defaultChecked:r,disabled:o,onCheckedChange:i,children:(0,t.jsx)(h,{children:(0,t.jsx)(a.VQF,{})})}),(0,t.jsx)(p,{hidden:!l,htmlFor:l,children:l})]}))}),{display:"flex",justifyItems:"center",maxHeight:"1em"}),b=r(8979);function x(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var v=(0,c.zo)(b.fC,{all:"unset",width:42,height:18,backgroundColor:"$teal6",border:"1px solid transparent",borderRadius:"9999px",position:"relative",boxShadow:"0 2px 10px $teal9",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)","&:focus":{boxShadow:"0 0 0 2px transparent"},'&[data-state="checked"]':{backgroundColor:"White",border:"1px solid $teal9"},"&[data-disabled]":{border:"1px solid $teal6"}}),j=(0,c.zo)(b.bU,{display:"block",width:20,height:16,backgroundColor:"white",borderRadius:"9999px",boxShadow:"0 2px 2px $teal9",transition:"transform 100ms",transform:"translateX(2px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(20px)",backgroundColor:"$teal9"},"&[data-disabled]":{backgroundColor:"$teal6"}});function y(e){return(0,t.jsx)(v,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){x(e,n,r[n])}))}return e}({},e,{children:(0,t.jsx)(j,{})}))}var C=function(e){(0,i.useEffect)((function(){var n=function(n){27===n.keyCode&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[])},w=r(1113),k=r(9943),O=r(7612);function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function S(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function $(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){S(e,n,r[n])}))}return e}function F(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function P(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return z(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=(0,O.zo)("div",{display:"flex",flexFlow:"column",justifyContent:"center",alignItems:"center",rowGap:25,fontSize:"0.9em","& > *":{width:"60%"},"&.hidden":{width:0,height:0,opacity:0,zIndex:-9999},"@md":{"& > *":{width:"95%"}},"@sm":{fontSize:"0.75em"}}),R=(0,O.zo)((function(e){return(0,t.jsx)("span",$({},e,{children:(0,t.jsx)(a.R5A,{})}))}),{position:"absolute",width:"min-content",cursor:"pointer",top:5,right:"50%",transform:"translateX(50%)",color:"$teal9",fontSize:"3.5em","@md":{top:"5vh"},"@sm":{top:"2vh"}}),N=(0,O.zo)("div",{display:"flex",flexFlow:"column",border:"1px solid $gray9",backgroundColor:"White"}),q=(0,O.zo)((function(e){var n=e.changed,r=e.onSave,o=e.onRestore,i=F(e,["changed","onSave","onRestore"]);return(0,t.jsxs)("div",$({},i,{children:[(0,t.jsx)(U,{children:i.children}),(0,t.jsxs)(U,{css:{columnGap:10},children:[(0,t.jsx)(l.Z,{size:"small",bordered:!0,onClick:function(e){e.stopPropagation(),o&&o()},children:"Restore"}),(0,t.jsx)(l.Z,{size:"small",disabled:!n,onClick:function(e){e.stopPropagation(),r&&r()},children:"Save"})]})]}))}),S({display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid $gray9",padding:"0 15px",height:"3em",fontWeight:"bolder"},"& ".concat(l.Z),{height:"25px",padding:"5px 10px"})),I=(0,O.zo)("div",{padding:15,"@sm":{padding:"10px 0"}}),W=(0,O.zo)((function(e){var n=e.entry,r=F(e,["entry"]);return(0,t.jsx)("select",$({},r,{children:P((0,o.flatten)(n.requiredFields)).concat(P((0,o.flatten)(n.optionalFields))).map((function(e){return(0,t.jsx)("option",{value:e,children:e},e)}))}))}),{border:"1px solid $teal6",backgroundColor:"White",margin:"0px 5px","&:focus":{borderColor:"$gray9",outline:"none"},height:25}),A=(0,O.zo)((function(e){var n=e.disabled,r=e.regexp,o=e.onRegExpChange,a=F(e,["disabled","regexp","onRegExpChange"]),l=(0,i.useRef)(),d=(0,i.useRef)();(0,i.useEffect)((function(){l.current.value=(null===r||void 0===r?void 0:r.source)||"",d.current.value=(null===r||void 0===r?void 0:r.flags)||""}),[r]);var c=(0,i.useCallback)((function(){var e,n,r,t,i=null===(e=l.current)||void 0===e||null===(n=e.value)||void 0===n?void 0:n.trim(),a=null===(r=d.current)||void 0===r||null===(t=r.value)||void 0===t?void 0:t.trim();o&&o(i?new RegExp(i,a):null)}),[l,d,o]);return(0,t.jsxs)("span",$({},a,{children:["/",(0,t.jsx)("input",{ref:l,disabled:n,type:"text",placeholder:"regex",onChange:function(e){try{c()}catch(n){}}}),"/",(0,t.jsx)("input",{ref:d,disabled:n,type:"text",placeholder:"flags",onChange:function(e){var n;if(!/^[gimuy]$/i.test(null===(n=e.target)||void 0===n?void 0:n.value))try{c()}catch(r){}}})]}))}),{color:"$gray8",whiteSpace:"nowrap",margin:"0 0.5em","& > input":{border:"none",outline:"none",borderBottom:"1px solid $gray8",padding:"0 0.5em",lineHeight:1.25,"&:first-child":{marginRight:5},"&:last-child":{maxWidth:50}},"@sm":{display:"inline-block"}}),U=(0,O.zo)("div",{display:"flex",justifyContent:"center",alignItems:"center"}),G=(0,O.zo)("select",{border:"none",backgroundColor:"transparent",fontSize:"1em",color:"$teal9",fontWeight:"bolder",outline:"none"}),_=(0,O.zo)((function(e){var n,r=e.config,a=e.onConfigUpdate,l=F(e,["config","onConfigUpdate"]),d=(0,i.useState)(),c=d[0],s=d[1],u=(0,i.useState)(),f=u[0],h=u[1],p=(0,i.useState)(),g=p[0],b=p[1],x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(w)[0].name,n=null===w||void 0===w?void 0:w[(0,o.capitalize)(e)];s(n),h((0,o.flatten)(P(n.requiredFields).concat(P(n.optionalFields)))[0]),b($({},r.find((function(n){return n.entry===e})),{changed:!1}))},v=function(e){return b($({},e,{changed:!(0,o.isEqual)((0,o.omit)(e,"changed"),r.find((function(e){return e.entry===c.name})))}))};return(0,i.useEffect)((function(){return c&&b($({},r.find((function(e){return e.entry===c.name})),{changed:!1}))}),[r]),(0,i.useEffect)((function(){return x()}),[]),c&&(0,t.jsxs)(N,$({},l,{children:[(0,t.jsxs)(q,{changed:g.changed,onSave:function(){return a&&a((0,o.omit)(g,["changed"]))},onRestore:function(){return v(r.find((function(e){return e.entry===c.name})))},children:["Entry:",(0,t.jsx)(G,{value:c.name,onChange:function(e){return x(e.currentTarget.value)},children:Object.values(w).map((function(e,n){return(0,t.jsx)("option",{value:e.name,label:"@".concat(e.name)},e.name)}))})]}),(0,t.jsxs)(I,{children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{children:"Enabled:"}),(0,t.jsx)(y,{checked:g.normalize,onCheckedChange:function(e){return v($({},g,{normalize:e}))}})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{children:"Required:"}),(0,t.jsx)("div",{children:c.requiredFields.length?c.requiredFields.map((function(e){return(0,t.jsx)(m,{defaultLabel:"string"===typeof e?e:"[".concat(e.join("|"),"]"),disabled:!0,checked:!0},"".concat(c.name,".").concat(e))})):"<none>"})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{children:"Optional:"}),(0,t.jsx)("div",{children:c.optionalFields.length?c.optionalFields.sort((function(e,n){return e.length-n.length})).map((function(e){var n;return(0,t.jsx)(m,{disabled:!g.normalize,defaultLabel:"string"===typeof e?e:"[".concat(e.join("|"),"]"),checked:!!(null===(n=g.requiredFields)||void 0===n?void 0:n.find((function(n){return(0,o.isEqual)(n,e)}))),onCheckedChange:function(n){return v($({},g,{requiredFields:n?P(g.requiredFields).concat([e]):g.requiredFields.filter((function(n){return!(0,o.isEqual)(n,e)}))}))}},"".concat(c.name,".").concat(e))})):"<none>"})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{children:"Validators:"}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{children:["Validate",(0,t.jsx)(W,{entry:c,value:f,disabled:!g.normalize,onChange:function(e){return h(e.currentTarget.value||"")}}),"using the pattern",(0,t.jsx)(A,{disabled:!g.normalize,regexp:null===g||void 0===g||null===(n=g.validators)||void 0===n?void 0:n[f],onRegExpChange:function(e){v($({},g,{validators:$({},g.validators,S({},f,e))}))}})]})})]})]})]}))}),S({},"& ".concat(I),{display:"flex",flexFlow:"column",alignContent:"center",padding:"25px 35px",rowGap:"1.2em","& > .row":{display:"grid",gridAutoFlow:"column",justifyContent:"start",height:"max-content","& > span":{width:70,fontWeight:"bolder",marginRight:10,display:"flex",alignItems:"center",justifyContent:"flex-end"},"& > div":{display:"flex",alignItems:"center",flexWrap:"wrap",rowGap:10,columnGap:5}},"@sm":{padding:"15px 5px"}})),L=(0,O.zo)((function(e){var n=e.config,r=e.onConfigUpdate,a=F(e,["config","onConfigUpdate"]),l=(0,i.useState)($({},n,{changed:!1})),d=l[0],c=l[1],s=function(e){return c($({},d,e,{changed:!(0,o.isEqual)(n,(0,o.omit)($({},d,e),"changed"))}))};return(0,t.jsxs)(N,$({},a,{children:[(0,t.jsx)(q,{changed:d.changed,onSave:function(){r((0,o.omit)(d,"changed")),c($({},d,{changed:!1}))},onRestore:function(){return c($({},n,{changed:!1}))},children:"Normalizer"}),(0,t.jsx)(I,{children:(0,t.jsx)("table",{children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("label",{htmlFor:"replace-quotes",children:"Replace quotes with brackets"})}),(0,t.jsx)("td",{children:(0,t.jsx)(y,{id:"replace-quotes",checked:null===d||void 0===d?void 0:d.awaysUseBraces,onCheckedChange:function(e){return s({awaysUseBraces:e})}})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("label",{htmlFor:"remove-fields",children:"Remove unnecessary fields"})}),(0,t.jsx)("td",{children:(0,t.jsx)(y,{id:"remove-fields",checked:null===d||void 0===d?void 0:d.removeNotRequiredFields,onCheckedChange:function(e){return s({removeNotRequiredFields:e})}})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("label",{htmlFor:"format-author",children:'Format "author" field'})}),(0,t.jsx)("td",{children:(0,t.jsx)(y,{id:"format-author",checked:null===d||void 0===d?void 0:d.formatAuthorField,onCheckedChange:function(e){return s({formatAuthorField:e})}})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("label",{htmlFor:"escape-proper-names",children:"Preserve proper names on title"})}),(0,t.jsx)("td",{children:(0,t.jsx)(y,{id:"escape-proper-names",checked:null===d||void 0===d?void 0:d.escapeProperNames.enabled,onCheckedChange:function(e){return s({escapeProperNames:$({},null===d||void 0===d?void 0:d.escapeProperNames,{enabled:e})})}})}),(0,t.jsx)("td",{children:(0,t.jsx)("textarea",{rows:3,disabled:!(null===d||void 0===d?void 0:d.escapeProperNames.enabled),value:null===d||void 0===d?void 0:d.escapeProperNames.names.join(" "),onChange:function(e){return s({escapeProperNames:$({},null===d||void 0===d?void 0:d.escapeProperNames,{names:e.target.value.split(" ").map((function(e){return e.trim()}))})})}})})]})]})})})]}))}),{"& table":{width:"100%","& > tbody > tr":{backgroundColor:"$teal1","& > td":{padding:"0.5em","@sm":{padding:"0.25em"},verticalAlign:"middle","&:nth-child(1)":{textAlign:"right",width:150,"@sm":{width:100}},"&:nth-child(2)":{width:60},"&:nth-child(3)":{"& textarea":{width:"100%"}}}}}}),V=!0,Z=(0,O.zo)((function(e){var n=e.onClose,r=F(e,["onClose"]),o=(0,i.useContext)(k.Z),a=o.config,l=o.updateEntryConfig,d=o.updateNormalizerConfig;return C(n),(0,t.jsxs)(E,$({},r,{className:"".concat(r.className," ").concat(r.hidden?"hidden":""),children:[(0,t.jsx)(R,{onClick:n}),(0,t.jsx)(L,{config:null===a||void 0===a?void 0:a.normalizer,onConfigUpdate:function(e){return d(e)}}),(0,t.jsx)(_,{config:a.entries,onConfigUpdate:function(e){return l(e)}})]}))}),{})}}]);