(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{6281:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(7121)}])},7121:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ue}});var r=n(5893),o=n(6486),i=n(9008),a=n.n(i),c=n(7294),s=n(2370),l=n(9119),u=n(4125),d=n(8519),f=n(9825),p=n(6625),m=n(2488),h=n(6744),y=(0,h.F4)({"0%":{opacity:1},"100%":{opacity:0}}),b=(0,h.F4)({from:{transform:"translateX(calc(100% + ".concat(25,"px))")},to:{transform:"translateX(0)"}}),v=(0,h.F4)({from:{transform:"translateX(var(--radix-toast-swipe-end-x))"},to:{transform:"translateX(calc(100% + ".concat(25,"px))")}}),g=(0,h.zo)(m.l_,{position:"fixed",bottom:0,right:0,display:"flex",flexDirection:"column",padding:25,gap:10,width:390,maxWidth:"100vw",margin:0,listStyle:"none",zIndex:2147483647,outline:"none"}),w=(0,h.zo)(m.fC,{backgroundColor:"White",borderRadius:6,border:"1px solid $teal8",boxShadow:"hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px",padding:15,display:"grid",gridTemplateAreas:'"title action" "description action"',gridTemplateColumns:"auto max-content",columnGap:15,alignItems:"center","@media (prefers-reduced-motion: no-preference)":{'&[data-state="open"]':{animation:"".concat(b," 150ms cubic-bezier(0.16, 1, 0.3, 1)")},'&[data-state="closed"]':{animation:"".concat(y," 100ms ease-in forwards")},'&[data-swipe="move"]':{transform:"translateX(var(--radix-toast-swipe-move-x))"},'&[data-swipe="cancel"]':{transform:"translateX(0)",transition:"transform 200ms ease-out"},'&[data-swipe="end"]':{animation:"".concat(v," 100ms ease-out forwards")}}}),x=(0,h.zo)(m.Dx,{gridArea:"title",marginBottom:5,fontWeight:"bolder",fontSize:"1.1em"}),j=(0,h.zo)(m.dk,{gridArea:"description",margin:0,color:"$gray10",fontSize:"0.9em",lineHeight:1.3}),S=(0,h.zo)(m.aU,{gridArea:"action"}),k=m.zt,O=g,C=w,A=x,E=j,z=S,N=(m.x8,n(4051)),P=n.n(N),I=(n(982),n(5152));function L(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,o)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F,T=n.n(I)()((F=P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(774),n.e(364)]).then(n.bind(n,7762));case 2:return t=e.sent.Steps,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=F.apply(e,t);function i(e){L(o,n,r,i,a,"next",e)}function a(e){L(o,n,r,i,a,"throw",e)}i(void 0)}))}),{loadableGenerated:{webpack:function(){return[7762]}},ssr:!1});function B(e){var t=(0,c.useState)(!1),n=t[0],o=t[1];return(0,c.useEffect)((function(){setTimeout((function(){return o(!0)}),500)}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:"\n        .introjs-custom .introjs-tooltiptext {\n          text-align: center;\n          vertical-align: middle;\n        }\n\n        .introjs-custom .introjs-tooltip-title {\n          color: var(--colors-teal9);\n        }\n      "}),(0,r.jsx)(T,{enabled:("undefined"===typeof localStorage||"1"!==localStorage.getItem("tour.".concat(e.tourName)))&&n,steps:e.steps.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},e,{tooltipClass:"introjs-custom"})})),initialStep:0,onBeforeChange:e.onBeforeChange,onExit:function(t){void 0!==t&&localStorage.setItem("tour.".concat(e.tourName),"1")},options:{doneLabel:"Done",disableInteraction:!0}})]})}var $=n(1113),R=n(152);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e,t,n){return(q=Z()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&X(o,n.prototype),o}).apply(null,arguments)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function G(e){var t="function"===typeof Map?new Map:void 0;return G=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return q(e,arguments,M(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),X(n,e)},G(e)}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}var Y=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];U(this,e),this.init=t,this.children=n,this.type="root"},Q=function e(t,n,r){U(this,e),this.init=t,this.parent=n,this.text=r,this.type="text",n.children.push(this)},K=function e(t,n){U(this,e),this.init=t,this.parent=n,this.type="block",this.command="",n.children.push(this)},ee=function e(t,n,r,o,i){U(this,e),this.init=t,this.parent=n,this.raw=r,this.braces=o,this.parens=i,this.type="comment",n.block=this},te=function e(t,n,r,o,i){U(this,e),this.init=t,this.parent=n,this.raw=r,this.braces=o,this.parens=i,this.type="preamble",n.block=this},ne=function e(t,n,r,o,i){U(this,e),this.init=t,this.parent=n,this.raw=r,this.braces=o,this.parens=i,this.type="string",n.block=this},re=function e(t,n){U(this,e),this.init=t,this.parent=n,this.type="entry",n.block=this,this.fields=[]},oe=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";U(this,e),this.init=t,this.parent=n,this.name=r,this.type="field",this.value=new ie(t,this)},ie=function(){function e(t,n){U(this,e),this.init=t,this.parent=n,this.type="concat",this.canConsumeValue=!0,this.concat=[]}return e.prototype.toString=function(){return this.concat.map((function(e){return e.value})).join("").trim()},e}(),ae=function e(t,n,r){U(this,e),this.init=t,this.parent=n,this.value=r,this.type="literal",n.concat.push(this)},ce=function e(t,n){U(this,e),this.init=t,this.parent=n,this.type="braced",this.value="",this.depth=0,n.concat.push(this)},se=function e(t,n){U(this,e),this.init=t,this.parent=n,this.type="quoted",this.value="",this.depth=0,n.concat.push(this)};function le(e){for(var t=new Y(0),n=t,r=1,o=0,i=0;i<e.length;i++){var a=e[i],c=e[i-1];switch("\n"===a&&(r++,o=0),o++,n.type){case"root":n="@"===a?new K(i,n):new Q(i,n,a);break;case"text":"@"===a&&/[\s\r\n}]/.test(c)?n=new K(i,n.parent):n.text+=a;break;case"block":if("@"===a){var s=n.parent.children[n.parent.children.length-2];"text"===(null===s||void 0===s?void 0:s.type)?s.text+="@"+n.command:(n.parent.children.pop(),new Q(i,n.parent,"@"+n.command),n.parent.children.push(n)),n.command=""}else if("{"===a||"("===a){var l=n.command.trim();if(""===l||/\s/.test(l))n.parent.children.pop(),n=new Q(i,n.parent,"@"+n.command+a);else{n.command=l;var u=n.command.toLowerCase(),d=H("{"===a?[1,0]:[0,1],2),f=d[0],p=d[1],m="@"+u+a;switch(u){case"string":n=new ne(i,n,m,f,p);break;case"preamble":n=new te(i,n,m,f,p);break;case"comment":n=new ee(i,n,m,f,p);break;default:n=new re(i+1,n)}}}else a.match(/[=#,})\[\]]/)?(n.parent.children.pop(),n=new Q(i,n.parent,"@"+n.command+a)):n.command+=a;break;case"comment":case"string":case"preamble":"{"===a?n.braces++:"}"===a?n.braces--:"("===a?n.parens++:")"===a&&n.parens--,n.raw+=a,0===n.braces&&0===n.parens&&(n=n.parent.parent);break;case"entry":if("}"===a||")"===a)n=n.parent.parent;else if(","===a)n=new oe(i+1,n);else if("="===a){if(!n.key)throw new de(e,n,i,r,o);var h=new oe(i+1,n,n.key);n.fields.push(h),n.key=void 0,n=h.value}else if(ue(a));else{if(a.match(/[=#,{}()\[\]]/))throw new de(e,n,i,r,o);var y;n.key=(null!==(y=n.key)&&void 0!==y?y:"")+a}break;case"field":if("}"===a||")"===a)n.name=n.name.trim(),n=n.parent.parent.parent;else if("="===a)n.name=n.name.trim(),n=n.value;else if(","===a)n.name=n.name.trim(),n=new oe(i+1,n.parent);else{if(/[=,{}()\[\]]/.test(a))throw new de(e,n,i,r,o);n.name?n.name+=a:ue(a)?n.init+=1:(n.parent.fields.push(n),n.name=a)}break;case"concat":if(ue(a))break;if(n.canConsumeValue){if(/[#=,}()\[\]]/.test(a))throw new de(e,n,i,r,o);n.canConsumeValue=!1,n="{"===a?new ce(i,n):'"'===a?new se(i,n):new ae(i,n,a)}else if(","===a)n=new oe(i+1,n.parent.parent);else if("}"===a||")"===a)n=n.parent.parent.parent.parent;else{if("#"!==a)throw new de(e,n,i,r,o);n.canConsumeValue=!0}break;case"literal":ue(a)?n=n.parent:","===a?n=new oe(i+1,n.parent.parent.parent):"}"===a?n=n.parent.parent.parent.parent.parent:"#"===a?(n=n.parent).canConsumeValue=!0:n.value+=a;break;case"braced":if("}"===a&&0===n.depth){n=n.parent;break}"{"===a?n.depth++:"}"===a&&n.depth--,n.value+=a;break;case"quoted":if('"'===a&&0===n.depth){n=n.parent;break}if("{"===a)n.depth++;else if("}"===a&&(n.depth--,n.depth<0))throw new de(e,n,i,r,o);n.value+=a}}return t}function ue(e){return/^[ \t\n\r]*$/.test(e)}var de=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(n,e);var t=J(n);function n(e,r,o,i,a){var c;return U(this,n),(c=t.call(this,"Line ".concat(i,":").concat(a,": Syntax Error in ").concat(r.type,"\n")+e.slice(Math.max(0,o-20),o)+">>"+e[o]+"<<"+e.slice(o+1,o+20))).node=r,c.line=i,c.column=a,c.name="Syntax Error",c.char=e[o],c}return n}(G(Error));function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pe(e,t,n[t])}))}return e}function ye(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){var n=new Set,r=[];return function e(i){if(me(i,Y))return i.children.forEach(e);if(me(i,K)){var a={from:i.init,to:i.init+i.command.trim().length+1};return ye(["string","comment","preamble"]).concat(ye(Object.values($).map((function(e){return e.name})))).includes(i.command.trim().toLowerCase())?i.command.trim()!==i.command.trim().toLowerCase()&&r.push(he({},a,{message:"Bibtex entries should be lower case letters",severity:"warning"})):r.push(he({},a,{message:'Unknown bibtex entry "'.concat(i.command.trim(),'"'),severity:"error"})),e(i.block)}if(me(i,re))return""===(i.key||"").trim()?r.push({from:i.init,to:i.init,message:"No key provided to the reference",severity:"error"}):n.has(i.key)?r.push({from:i.init,to:i.init+i.key.length,message:"Duplicated reference key",severity:"error"}):n.add(i.key),i.fields.forEach(e);if(me(i,oe)){var c=t.find((function(e){return e.entry===i.parent.parent.command.trim().toLowerCase()})),s=i.name.trim().toLowerCase(),l={from:i.init,to:i.init+s.length};if((null===R||void 0===R?void 0:R[(0,o.capitalize)(s)])?(i.name.trim()!==s&&r.push(he({},l,{message:"Field names should on lower case",severity:"warning"})),i.parent.fields.map((function(e){return e.name.trim().toLowerCase()})).filter((function(e){return s===e})).length>1&&r.push(he({},l,{message:"Duplicated field on the reference",severity:"error"})),c&&c.normalize&&!(0,o.flatten)(c.requiredFields).includes(s)&&r.push(he({},l,{message:'Field "'.concat(i.name.trim(),'" is not mandatory on @').concat(i.parent.parent.command.toLocaleLowerCase()),severity:"info"}))):r.push(he({},l,{message:"Invalid bibtex field name",severity:"error"})),c.validators){var u,d=null===(u=c.validators)||void 0===u?void 0:u[s];d&&!d.test(i.value.toString())&&r.push({from:i.init,to:i.init+i.name.length,message:"Validation failed for '".concat(i.name,"' (validator: ").concat(d.toString(),")"),severity:"error"})}return i.value.concat.forEach(e)}}(e),r}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"===typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}function Se(e,t){if(ge(e,Y))return e.children.map((function(e){return Se(e,t)})).join("\n");if(ge(e,Q))return e.text.trim();if(ge(e,K))return"@".concat(e.command.toLowerCase()," {").concat(Se(e.block,t),"}");if(ge(e,ee)||ge(e,te)||ge(e,ne)){var n=we(e.raw.trim().match(/^@\w+[{"](.*)[}"]$/i),2)[1];return" ".concat(n.trim()," ")}if(ge(e,re))return"".concat(e.key,",\n  ").concat(e.fields.sort((function(t,n){return function(e,t,n){var r=Object.values($).find((function(t){return t.name===e.trim().toLowerCase()}));if(!r)return 0;var i=(0,o.flatten)(xe(r.requiredFields).concat(xe(r.optionalFields))),a=[i.indexOf(t.trim().toLowerCase()),i.indexOf(n.trim().toLowerCase())],c=a[0],s=a[1];return(c>=0?c:Number.MAX_VALUE)-(s>=0?s:Number.MAX_VALUE)}(e.parent.command,t.name,n.name)})).filter((function(e){if(!(null===t||void 0===t?void 0:t.normalizer.removeNotRequiredFields))return!0;var n=null===t||void 0===t?void 0:t.entries.find((function(t){return t.entry===e.parent.parent.command.trim().toLowerCase()}));return(0,o.flatten)((null===n||void 0===n?void 0:n.requiredFields)||[]).includes(e.name.trim().toLowerCase())})).map((function(e){var n=e.value.concat.map((function(n){var r=["month","year"].includes(e.name.trim().toLowerCase())?"literal":(null===t||void 0===t?void 0:t.normalizer.awaysUseBraces)?"braced":n.type,o=n.value.trim();return"title"===e.name.trim().toLowerCase()&&t.normalizer.escapeProperNames.enabled&&t.normalizer.escapeProperNames.names.forEach((function(e){o=" ".concat(o," ").replaceAll(new RegExp("^(.*)([\\s{]+|^)(".concat(e,")([\\s}]+|$)(.*)$"),"gi"),"$1 {".concat(e,"} $5")).replaceAll(/\s+/g," ").trim()})),"author"===e.name.trim().toLowerCase()&&t.normalizer.formatAuthorField&&(o=o.split(/\sand\s/i).map((function(e){return e.replace(/(.*),(.*)/,"$2 $1").replaceAll(/\s+/g," ").trim()})).join(" and ")),function(e,t){return"braced"===t?"{ ".concat(e," }"):"quoted"===t?'"'.concat(e,'"'):e}(o,r)})).join("");return"".concat(function(e){var t,n=(t=Math).max.apply(t,xe(Object.keys(R).map((function(e){return e.length}))));return e.padEnd(n," ")}(e.name.toLowerCase())," = ").concat(n)})).join(",\n  "),"\n");throw new Error("Unknown Bibtex AST Node (".concat(e.type,")"))}var ke=n(4454),Oe=n(9943),Ce=n(454),Ae=n(7612),Ee=n(8621);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ne(e,t,n[t])}))}return e}function Ie(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _e,Fe=(0,Ae.zo)("div",{height:"100%",display:"flex",flexFlow:"row",columnGap:"1em",fontSize:"14px",width:"calc(100% + 15px)","@sm":{flexFlow:"column"},"@md":{paddingTop:"1em",paddingBottom:"2em"}}),Te=(0,Ae.zo)(Ee.default,{position:"absolute",zIndex:999,top:0,height:"100%",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(2px)"}),Be=(0,Ae.zo)(f.ZP,{width:"100%",maxHeight:"100%",border:"1px solid $teal6","& .cm-scroller":{overflow:"scroll"}}),$e=(0,Ae.zo)((function(e){var t=e.hasSyntaxError,n=void 0!==t&&t,o=e.infos,i=void 0===o?0:o,a=e.warnings,c=void 0===a?0:a,s=e.errors,l=void 0===s?0:s,u=Ie(e,["hasSyntaxError","infos","warnings","errors"]);return(0,r.jsxs)("div",Pe({},u,{className:"".concat(u.className," ").concat(n?"has-syntax-error":""),children:[e.children,(0,r.jsxs)("span",{id:"bn-editor-summary",children:[(0,r.jsx)("span",{hidden:!n,children:"Syntax Error!"}),(0,r.jsxs)("span",{hidden:n||!i,children:[i," info(s)"]}),(0,r.jsxs)("span",{hidden:n||!c,children:[c," warning(s)"]}),(0,r.jsxs)("span",{hidden:n||!l,children:[l," error(s)"]})]})]}))}),{display:"flex",position:"relative",width:"100%",opacity:.75,fontWeight:"bolder",border:"2px solid transparent","&.has-syntax-error":{border:"2px solid $tomato8"},"& > span":{position:"absolute",bottom:15,right:"50%",transform:"translate(50%)","& > span:nth-child(2)":{color:"$purple8"},"& > span:nth-child(3)":{color:"$amber8"},"& > span:nth-child(1), & > span:nth-child(4)":{color:"$tomato8"},"& > span + span":{marginLeft:10,textAlign:"end"},"@sm":{width:"100%",right:"inherit",transform:"inherit",textAlign:"center"}},"@sm":{height:"100%"}}),Re=(0,Ae.zo)("div",{display:"flex",flexFlow:"column",rowGap:10,"@sm":(_e={marginTop:15,rowGap:5,flexFlow:"row",justifyContent:"center"},Ne(_e,"& > ".concat(p.Z),{display:"inline-flex","& > span":{display:"none"}}),Ne(_e,"& > ".concat(p.Z," + ").concat(p.Z),{marginLeft:"1em"}),_e)}),De={start:[{regex:/.*@comment/i,token:"comment",push:"comment"},{regex:/(\s*)(@preamble)(\s*{)/i,token:["","variable-2"],push:"braced"},{regex:/(\s*)(@preamble)(\s*\()/i,token:["","variable-2"],push:"parenthesised"},{regex:/(\s*)(@string)(\s*{)/i,token:["","variable-2"],push:"braced"},{regex:/(\s*)(@string)(\s*\()/i,token:["","variable-2"],push:"parenthesised"},{regex:/(\s*)(@[^=#,{}()[\] \t\n\r]+)(\s*\{\s*)([^=#,{}()[\] \t\n\r]+)(\s*,)/,token:["","variable-2"],push:"entry"},{regex:/.*/,token:"comment"}],entry:[{regex:/([^=,{}()[\]\t\n\r]+)(\s*)(=)/,token:["keyword","","operator"]},{regex:/"/,push:"quoted"},{regex:/\d+/i,token:"number"},{regex:/\{/,push:"braced"},{regex:/}/,pop:!0}],quoted:[{regex:/\{/,push:"braced"},{regex:/[^{"]+/,token:"string"},{regex:/"/,pop:!0}],braced:[{regex:/\{/,push:"braced"},{regex:/[^{}]+/,token:"string"},{regex:/\}/,pop:!0}],parenthesised:[{regex:/\{/,token:"comment",push:"braced"},{regex:/[^{)]+/,token:"string"},{regex:/\)/,pop:!0}],comment:[{regex:/.*\}/,token:"comment",pop:!0},{regex:/.*/,token:"comment"}]};function Ue(){var e=(0,c.useContext)(Oe.Z).config,t=(0,c.useContext)(Ce.Z),n=t.content,i=t.updateContent,f=(0,c.useRef)(),m=(0,c.useRef)(),h=(0,c.useState)(!1),y=h[0],b=h[1],v=(0,c.useState)(null),g=v[0],w=v[1],x=(0,c.useState)(null),j=x[0],S=x[1],N=(0,c.useState)({opened:!1}),P=N[0],I=N[1],L=function(e){I({opened:!1}),setTimeout((function(){return I(e)}),250)};(0,c.useEffect)((function(){var e=document.getElementById("bn-editor-codemirror").children[0];w(null===e||void 0===e?void 0:e.clientHeight),S(null===e||void 0===e?void 0:e.clientWidth)}),[]);var _=(0,c.useState)({errors:0,warnings:0,hasSyntaxError:!1}),F=_[0],T=_[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"Bibtex Normalizer - Editor"})}),(0,r.jsx)(Te,{hidden:!y,onClose:function(){return b(!1)}}),(0,r.jsxs)(k,{swipeDirection:"right",children:[(0,r.jsx)(B,{tourName:"editorTour",steps:[{element:"#bn-editor-codemirror",intro:"You can start by copying your references to this editor.",title:"Bibtex editor"},{element:"#bn-editor-summary",intro:"The tool validates the content and puts marks on important parts",title:"Summary"},{element:"#bn-editor-settings",intro:"You can change the settings (e.g., set the required fields, use custom validators, and enable/disable options)",title:"Settings"},{element:"#bn-editor-normalize",intro:'Then, click on "Normalize" to automatically fix several issues',title:"Normalize"},{element:"#bn-editor-codemirror",intro:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{marginBottom:25},children:"Several issues can be fixed and other ones may need your help. Here, we performed a:"}),(0,r.jsxs)("ul",{style:{textAlign:"start",marginBottom:25},children:[(0,r.jsx)("li",{children:"Code Identation"}),(0,r.jsx)("li",{children:"Fields normalization"}),(0,r.jsx)("li",{children:"Fields sorting"}),(0,r.jsx)("li",{children:"Preserved proper names"})]}),(0,r.jsx)("div",{children:"You can use your own settings acessing the menu"})]}),title:"Bibtex editor"},{element:"#bn-editor-clipboard",intro:"Finally, you can copy the normalized references to clipboard",title:"Download or copy"},{element:"#bn-editor-download",intro:"... or download directly <br> \u270c(-\u203f-)\u270c",title:"Download or copy"}],onBeforeChange:function(e){switch(e){case 0:var t,n,r;if(""===(null===(t=f.current)||void 0===t?void 0:t.view.state.doc.toJSON().join("").trim()))null===(n=f.current)||void 0===n||n.view.update([null===(r=f.current)||void 0===r?void 0:r.view.state.update({changes:{from:0,to:f.current.view.state.doc.length,insert:'@Article{borges2019developers,\n  title="How do developers promote open source projects?",\n  author={Borges, Hudson Silva and Marco Tulio Valente},\n  journal={Computer}, pages={27--33},\n  year={19}\n}'}})]);break;case 4:m.current.click()}}}),(0,r.jsxs)(Fe,{children:[(0,r.jsx)($e,Pe({},F,{id:"bn-editor-codemirror",children:(0,r.jsx)(Be,{ref:f,height:g?"".concat(g,"px"):"100%",maxHeight:g?"".concat(g,"px"):"100%",width:j?"".concat(j,"px"):"100%",maxWidth:j?"".concat(j,"px"):"100%",basicSetup:!0,placeholder:'// Paste your bibtex content and click on "Normalize"',value:n||"",extensions:[(0,d.ir)((function(t){var n,r,i,a=[];try{a=be(le(t.state.doc.toJSON().join("\n")),e.entries)}catch(s){r=s,(null!=(i=de)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)&&(n=s)}var c={infos:a.filter((function(e){return"info"===e.severity})).length,warnings:a.filter((function(e){return"warning"===e.severity})).length,errors:a.filter((function(e){return"error"===e.severity})).length,hasSyntaxError:void 0!==n};return(0,o.isEqual)(c,F)||T(c),a})),(0,d.Q2)(),l.il.define((0,u.Q)(De))],onChange:function(e){return i(e)}})})),(0,r.jsxs)(Re,{children:[(0,r.jsxs)(p.Z,{id:"bn-editor-normalize",ref:m,size:"normal",disabled:y,onClick:function(){if(0!==n.length){var t=le(f.current.view.state.doc.toString()),r=Se(t,e);f.current.view.update([f.current.view.state.update({changes:{from:0,to:f.current.view.state.doc.length,insert:r}})]),Object.entries((0,o.countBy)(be(t,e.entries),"severity")).forEach((function(e){var t=Le(e,2),n=t[0],r=t[1];return ke.B({action:"normalize",category:"editor",label:n,value:Number(r).toString()})})),L({opened:!0,title:"Normalized",description:"References normalized and editor updated"})}},children:[(0,r.jsx)(s.LTV,{style:{height:"1.25em",width:"1.25em"}})," ",(0,r.jsx)("span",{children:"Normalize"})]}),(0,r.jsxs)(p.Z,{id:"bn-editor-settings",size:"normal",color:"normal",bordered:!0,onClick:function(){return b(!y)},children:[(0,r.jsx)(s.N_v,{style:{height:"1.25em",width:"1.25em"}})," ",(0,r.jsx)("span",{children:"Settings"})]}),(0,r.jsxs)(p.Z,{id:"bn-editor-clipboard",size:"normal",color:"normal",bordered:!0,disabled:y,onClick:function(){0!==n.length&&(navigator.clipboard.writeText(f.current.view.state.doc.toJSON().join("\n")),ke.B({action:"copy_to_clipboard",category:"editor",label:"length",value:Number(f.current.view.state.doc.length).toString()}),L({opened:!0,title:"Copied",description:"Content copied to clipboard"}))},children:[(0,r.jsx)(s.mcF,{style:{height:"1.25em",width:"1.25em"}})," ",(0,r.jsx)("span",{children:"Copy"})]}),(0,r.jsxs)(p.Z,{id:"bn-editor-download",size:"normal",color:"normal",bordered:!0,disabled:y,onClick:function(){if(0!==n.length){var e=document.createElement("a"),t=new Blob([f.current.view.state.doc.toJSON().join("\n")],{type:"application/x-bibtex",endings:"transparent"});e.href=URL.createObjectURL(t),e.download="references.bib",document.body.appendChild(e),e.click(),e.remove(),ke.B({action:"download",category:"editor",label:"length",value:Number(f.current.view.state.doc.length).toString()})}},children:[(0,r.jsx)(s.P9U,{style:{height:"1.25em",width:"1.25em"}})," ",(0,r.jsx)("span",{children:"Download"})]}),(0,r.jsxs)(p.Z,{id:"bn-editor-clear",size:"normal",bordered:!0,color:"warning",disabled:y,onClick:function(){0!==n.length&&(f.current.view.update([f.current.view.state.update({changes:{from:0,to:f.current.view.state.doc.length,insert:""}})]),ke.B({action:"editor_clear",category:"editor",label:"length",value:Number(f.current.view.state.doc.length).toString()}),L({opened:!0,title:"Cleared",description:"Content cleared"}))},children:[(0,r.jsx)(s.YFK,{style:{height:"1em",width:"1em"}})," ",(0,r.jsx)("span",{children:"Clear"})]})]}),(0,r.jsxs)(C,{open:P.opened,onOpenChange:function(e){return I(Pe({},P,{opened:e}))},duration:3e3,children:[(0,r.jsxs)(A,{css:{color:"$teal9"},children:["\u2714 | ",P.title]}),(0,r.jsx)(E,{children:P.description}),(0,r.jsx)(z,{asChild:!0,altText:"Close",children:(0,r.jsx)(p.Z,{color:"transparent",children:(0,r.jsx)(s.bjh,{})})})]}),(0,r.jsx)(O,{})]})]})]})}}},function(e){e.O(0,[662,762,189,222,621,774,888,179],(function(){return t=6281,e(e.s=t);var t}));var t=e.O();_N_E=t}]);